(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{134:function(e,t,n){e.exports={Backdrop:"modal-overlay_Backdrop__2lat4"}},135:function(e,t,n){e.exports={Container:"order-details_Container__kI9_F"}},137:function(e,t,n){e.exports={constructor_element_container:"ingredient-in-constructor_constructor_element_container__1SMyb",reorder_placeholder:"ingredient-in-constructor_reorder_placeholder__35QKy",reorder_placeholder_hover:"ingredient-in-constructor_reorder_placeholder_hover__1yHIh",drag_placeholder:"ingredient-in-constructor_drag_placeholder__2oT89",drag_placeholder_opened:"ingredient-in-constructor_drag_placeholder_opened__UVYZ2"}},138:function(e,t,n){e.exports={container:"main-page_container__35T_z"}},139:function(e,t,n){e.exports={container:"orders-list_container__22cAP"}},140:function(e,t,n){e.exports={container:"feed-list_container__14RmR"}},141:function(e,t,n){e.exports={main_container:"feed_main_container__3vc46",container:"feed_container__3Zlhe",title:"feed_title__yRxeu"}},142:function(e,t,n){e.exports={input_container_500:"profile-user-data_input_container_500__2bBYr",input__container:"profile-user-data_input__container__2EJhm",input_size_default:"profile-user-data_input_size_default__25RmD",cancel_submit:"profile-user-data_cancel_submit__50GrZ"}},25:function(e,t,n){e.exports={container:"burger-constructor_container__332QY",final_price:"burger-constructor_final_price__3z6n3",ingredients_scrollable_container:"burger-constructor_ingredients_scrollable_container__2ywl-",on_drag_ready:"burger-constructor_on_drag_ready__390b6",on_drag_hover:"burger-constructor_on_drag_hover__1uM1r",scrollbar_appeared:"burger-constructor_scrollbar_appeared__2Wv0h",empty_dropzone:"burger-constructor_empty_dropzone__Z0ITP",fake_ingredient:"burger-constructor_fake_ingredient__2eFZ3",drop_sign:"burger-constructor_drop_sign__2N0Qp"}},33:function(e,t,n){e.exports={container:"app-header_container__2ER_-",desktop_header:"app-header_desktop_header__3_4pU",mobile_header:"app-header_mobile_header__2LUzU",menu_desktop:"app-header_menu_desktop__1o6gr",menu_item:"app-header_menu_item__2bIm7"}},342:function(e,t,n){},344:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(27),c=n.n(a),s=n(14),o=n(10),l=n(5),d=n(33),u=n.n(d),m=n.p+"static/media/logo.b285bee5.svg",p=n.p+"static/media/mobile_menu_opener.579cc8f6.svg",f=n(0),j=function(){return Object(f.jsxs)("header",{children:[Object(f.jsxs)("nav",{className:[u.a.container,u.a.desktop_header,"text text_type_main-default"].join(" "),children:[Object(f.jsxs)("ul",{className:u.a.menu_desktop,children:[Object(f.jsx)("li",{className:u.a.menu_item,children:Object(f.jsxs)(o.b,{"data-testid":"constructor-link",exact:!0,to:"/",className:"link text text_type_main-default text_color_inactive",activeClassName:"text_color_active",children:[Object(f.jsx)(l.BurgerIcon,{type:"primary"}),Object(f.jsx)("span",{className:"ml-1",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(f.jsx)("li",{className:u.a.menu_item,children:Object(f.jsxs)(o.b,{"data-testid":"feed-link",to:"/feed",className:"link text text_type_main-default text_color_inactive",activeClassName:"text_color_active",children:[Object(f.jsx)(l.ListIcon,{type:"primary"}),Object(f.jsx)("span",{className:"ml-1",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]}),Object(f.jsx)(o.b,{to:"/",children:Object(f.jsx)(l.Logo,{})}),Object(f.jsx)("ul",{className:u.a.menu_desktop,children:Object(f.jsx)("li",{className:u.a.menu_item,children:Object(f.jsxs)(o.b,{"data-testid":"cabinet-link",to:"/profile",className:"link text text_type_main-default text_color_inactive",activeClassName:"text_color_active",children:[Object(f.jsx)(l.ProfileIcon,{type:"primary"}),Object(f.jsx)("span",{className:"ml-1",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})})]}),Object(f.jsxs)("nav",{className:[u.a.container,u.a.mobile_header,"text text_type_main-default mobile_header pr-1 pl-1"].join(" "),children:[Object(f.jsx)("img",{src:m,alt:""}),Object(f.jsx)("img",{src:p,alt:""})]})]})},h=n(11),_=(n(223),n(30)),b=n(9),x=n.n(b),g=n(16),O=n(58),v=n.n(O);n(226);function y(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function N(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var i=new Date;i.setTime(i.getTime()+1e3*r),r=n.expires=i}r&&r.toUTCString&&(n.expires=r.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var c in n){a+="; "+c;var s=n[c];!0!==s&&(a+="="+s)}a+="; path=/;",document.cookie=a}function E(e){N(e,null,{expires:-1})}function T(e,t){localStorage.setItem(e,t)}function w(e){return localStorage.getItem(e)}function C(e){localStorage.removeItem(e)}var F=function(e){return e&&0===e.indexOf("Bearer")?e.split("Bearer ")[1]:e},k=function(e){var t=v()(e).fromNow();return v()(e).locale("ru").calendar(null,{lastWeek:"[\u041f\u0440\u043e\u0448\u043b\u044b\u0439] dddd, H:mm",lastDay:"[\u0412\u0447\u0435\u0440\u0430], H:mm",sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f], H:mm",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430], H:mm",nextWeek:"dddd, H:mm",sameElse:function(){return"["+t+"]"}})},D=n(88),I=n.n(D),S=!1,R=[],W=I.a.create();W.defaults.headers.common={Authorization:"Bearer ".concat(y("accessToken"))},W.interceptors.response.use((function(e){return e}),(function(e){var t=e.config,n=e.response.status,r=t;return 401===n||403===n?(S||(S=!0,H().then((function(e){return e.json()})).then((function(e){if(!e.success)throw new Error(e.message?e.message:"Refresh \u0442\u043e\u043a\u0435\u043d \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d \u0438\u043b\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0439");var t=F(e.accessToken);N("accessToken",t),T("refreshToken",e.refreshToken),S=!1,z(t)})).catch((function(e){h.b.error(e.message),C("refreshToken"),E("accessToken"),mn.replace("/login")}))),new Promise((function(e){B((function(t){r.headers.Authorization="Bearer "+t,e(I()(r))}))}))):Promise.reject(e)}));var P,B=function(e){R.push(e)},z=function(e){R.map((function(t){return t(e)}))},A=W,L=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("https://norma.nomoreparties.space/api/auth/user").then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("https://norma.nomoreparties.space/api/orders",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:w("refreshToken")})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:w("refreshToken")})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(g.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({password:t,token:n})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.patch("https://norma.nomoreparties.space/api/auth/user",JSON.stringify(t)).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/ingredients",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=Object(_.b)({name:"ingredients",initialState:{ingredients:[],isFetching:!1,isErrorWhileFetching:!1},reducers:{ingredientsFetched:function(e,t){e.isFetching=!1,e.isErrorWhileFetching=!1,e.ingredients=t.payload},ingredientsAreFetching:function(e){e.isFetching=!0,e.isErrorWhileFetching=!1},ingredientsFetchError:function(e){e.isFetching=!1,e.isErrorWhileFetching=!0,e.ingredients=[]}}}),K=q.reducer,Y=n(31);!function(e){e.Bun="bun",e.Sause="sauce",e.Main="main"}(P||(P={}));var $=n(6),ee=n(36),te=n.n(ee),ne=n(350),re="ADD_INGREDIENT_TO_CONSTRUCTOR",ie="REMOVE_INGREDIENT_FROM_CONSTRUCTOR",ae="WRAP_INGREDIENTS_IN_CONSTRUCTOR",ce="CLEAR_CONSTRUCTOR",se="SET_INGREDIENT_DRAGGING",oe="CLEAR_INGREDIENT_DRAGGING",le=n(29),de=le.c,ue=function(){return Object(le.b)()},me=function(e){var t=e.ingredient,n=de((function(e){return e.burgerConstructor.ingredients})),i=ue(),a=Object(ne.a)({type:"ingredients",item:t,collect:function(e){return{opacity:e.isDragging()?.3:1,isDragging:e.isDragging()}}}),c=Object(Y.a)(a,2),o=c[0],d=o.opacity,u=o.isDragging,m=c[1];Object(r.useEffect)((function(){i({type:u?se:oe,ingredient:t})}),[u,t,i]);var p=function(){return n.reduce((function(e,n){return n._id===t._id?e+1:e}),0)},j=Object(s.h)(),h=Object(s.g)();return Object(f.jsxs)("div",{ref:m,style:{opacity:d},className:[te.a.ingredient_container,"mt-2 text text_type_main-default"].join(" "),children:[Object(f.jsx)("img",{src:t.image_mobile,alt:"",onClick:function(){return h.push({pathname:"/ingredients/".concat(t._id),state:{from:j}})}}),Object(f.jsxs)("div",{className:[te.a.price,"text text_type_digits-default"].join(" "),children:[Object(f.jsx)("span",{className:"mr-1",children:t.price}),Object(f.jsx)(l.CurrencyIcon,{type:"primary"})]}),Object(f.jsx)("p",{className:"title",children:t.name}),p()>0&&Object(f.jsx)(l.Counter,{count:p(),size:"small"}),Object(f.jsx)("div",{className:te.a.DetailPopup,onClick:function(){i({type:re,ingredient:Object($.a)({},t)})},children:Object(f.jsx)(l.CheckMarkIcon,{type:"success"})})]})},pe=function(){var e=Object(le.c)((function(e){return e.ingredients})),t=e.ingredients,n=e.isFetching,a=e.isErrorWhileFetching,c=Object(r.useState)(P.Bun),s=Object(Y.a)(c,2),o=s[0],d=s[1],u=[{type:P.Bun,name:"\u0411\u0443\u043b\u043a\u0438",headerRef:Object(r.useRef)(null),offsetTop:999},{type:P.Sause,name:"\u0421\u043e\u0443\u0441\u044b",headerRef:Object(r.useRef)(null),offsetTop:999},{type:P.Main,name:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",headerRef:Object(r.useRef)(null),offsetTop:999}],m=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=function(e){var t=e.target;if(t){var n=t.scrollTop,r={type:u[0].type,offsetTop:u[0].offsetTop};u.forEach((function(e){if(e.headerRef.current&&e.headerRef.current.parentElement){var t=Math.abs(e.headerRef.current.offsetTop-e.headerRef.current.parentElement.offsetTop-n);t<=r.offsetTop&&(r.type=e.type,r.offsetTop=t)}})),d(r.type)}},t=m.current;return t&&t.addEventListener("scroll",e),function(){t&&t.removeEventListener("scroll",e)}}));var p=function(e){d(e);var t=u.find((function(t){return t.type===e}));if(t){var n=t.headerRef.current;n&&n.scrollIntoView({behavior:"smooth",block:"start"})}};return n?Object(f.jsx)("h1",{children:"Loading..."}):a?Object(f.jsx)("div",{children:"Error while loading"}):Object(f.jsxs)("section",{className:te.a.ingredients_list_container,children:[Object(f.jsx)("div",{className:"text text_type_main-medium mb-3 p-1",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(f.jsx)("div",{style:{display:"flex"},children:u.map((function(e){return Object(f.jsx)(l.Tab,{value:e.type,active:o===e.type,onClick:p,children:e.name},e.type)}))}),Object(f.jsx)("div",{className:te.a.ingredients_panel,ref:m,children:u.map((function(e){return Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)("div",{ref:e.headerRef,className:[te.a.ingredients_panel_title,"text text_type_main-medium mb-3 p-1"].join(" "),children:e.name}),t.filter((function(t){return t.type===e.type})).map((function(e){return Object(f.jsx)(me,{ingredient:e},e._id)}))]},e.type)}))})]})},fe=n(25),je=n.n(fe),he=n(90),_e=n.n(he),be=n(134),xe=n.n(be),ge=function(e){var t=e.onCloseClick;return Object(f.jsx)("div",{className:xe.a.Backdrop,onClick:t})},Oe=document.getElementById("modals-container"),ve=function(e){var t=e.title,n=e.show,i=e.children,a=e.onCloseClick;if(Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&a()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[a]),!n)return null;return c.a.createPortal(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:[_e.a.ModalWindow,"text text_type_main-default"].join(" "),onClick:function(e){e.stopPropagation()},children:[Object(f.jsxs)("div",{className:_e.a.TitleAndClose,children:[Object(f.jsx)("span",{className:"text text_type_main-medium",children:t}),Object(f.jsx)(l.CloseIcon,{type:"primary",onClick:a})]}),i]}),Object(f.jsx)(ge,{onCloseClick:a})]}),Oe)},ye=n(135),Ne=n.n(ye),Ee=n.p+"static/media/order_placed.ad0297df.svg",Te="ORDER_IS_PROCESSING",we="ORDER_COMPLETED",Ce="ORDER_PROCESS_FAILED",Fe=n(136),ke=n.n(Fe),De=function(){var e=ue(),t=de((function(e){return e.burgerConstructor.ingredients}));Object(r.useEffect)((function(){t.length&&e(function(e){return function(t){var n={ingredients:e.map((function(e){return e._id}))};return t({type:Te}),M(n).then((function(e){if(!e.success)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");t({type:we,order:{name:e.name,number:e.order.number,ingredients:n}}),t({type:ce})})).catch((function(e){t({type:Ce,message:e.message})}))}}(t))}),[e,t]);var n=de((function(e){return e.order})),i=n.order,a=n.isFetching;return Object(f.jsx)("div",{className:Ne.a.Container,children:i.number&&!a?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{className:"text text_type_digits-large mt-2 glow_text",children:i.number}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-3 mb-5",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(f.jsx)("img",{src:Ee,alt:""}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-5 ",style:{fontSize:14},children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-2 mb-5 gray_text",style:{fontSize:14},children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{className:"text text_type_digits-medium mt-2 mb-15 glow_text",children:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430..."}),Object(f.jsx)(ke.a,{type:"BallTriangle",color:"#00BFFF",height:100,width:100})]})})},Ie=n(351),Se=n(137),Re=n.n(Se),We=n(62),Pe=Object(We.b)((function(e){var t=e.ingredient,n=ue();return Object(f.jsxs)("div",{className:[Re.a.constructor_element_container,"mt-1"].join(" "),children:[Object(f.jsx)(l.DragIcon,{type:"primary"}),Object(f.jsx)(l.ConstructorElement,{thumbnail:t.image_mobile,text:t.name,price:t.price,handleClose:function(){return n({type:ie,ingredient:t})}})]})})),Be=function(){var e=Object(r.useState)(!1),t=Object(Y.a)(e,2),n=t[0],i=t[1],a=de((function(e){return e.burgerConstructor})),c=a.ingredients,o=a.finalPrice,d=de((function(e){return e.draggingIngredient.ingredient})),u=ue(),m=de((function(e){return e.auth.user})),p=Object(s.g)(),j=Object(s.h)(),_=Object(Ie.a)({accept:"ingredients",drop:function(e){u({type:re,ingredient:Object($.a)({},e)})},collect:function(e){return{isHover:e.isOver()}}}),b=Object(Y.a)(_,2),x=b[0].isHover,g=b[1],O=c[0]&&c[0].type===P.Bun?c[0]:null,v=Object(We.a)((function(e){var t=e.items;return Object(f.jsx)("div",{children:t.map((function(e,t){return Object(f.jsx)(Pe,{index:O?t+1:t,ingredient:e},"".concat(t,"-").concat(e._id))}))})})),y=Object(r.useMemo)((function(){return c.filter((function(e){return e.type!==P.Bun}))}),[c]);return Object(f.jsxs)("section",{onDrop:function(e){return e.preventDefault()},className:je.a.container,ref:g,children:[!O&&Object(f.jsx)("div",{className:"constructor-element \n        constructor-element_pos_top \n        ".concat(je.a.fake_ingredient," \n        ").concat(d&&d.type===P.Bun&&je.a.on_drag_ready),children:Object(f.jsx)("span",{className:"constructor-element__row",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0434\u043b\u044f \u0412\u0430\u0448\u0435\u0433\u043e \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})}),O&&Object(f.jsx)("div",{className:"mt-1",children:Object(f.jsx)(l.ConstructorElement,{thumbnail:O.image_mobile,text:O.name,price:O.price,isLocked:!0,type:"top"})}),Object(f.jsxs)("div",{className:[je.a.ingredients_scrollable_container,y.length>5?je.a.scrollbar_appeared:null].join(" "),children:[!y.length&&Object(f.jsx)("div",{className:"constructor-element \n          ".concat(je.a.fake_ingredient," \n          ").concat(d&&d.type!==P.Bun&&je.a.on_drag_ready),children:Object(f.jsx)("span",{className:"constructor-element__row",children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b"})}),Object(f.jsx)(v,{items:y,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;u({type:ae,indexesOfTransferedElement:{from:t,to:n}})},distance:1})]}),!O&&Object(f.jsx)("div",{className:"constructor-element \n        constructor-element_pos_bottom\n        ".concat(je.a.fake_ingredient," \n        ").concat(d&&d.type===P.Bun&&je.a.on_drag_ready),children:Object(f.jsx)("span",{className:"constructor-element__row",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0434\u043b\u044f \u0412\u0430\u0448\u0435\u0433\u043e \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})}),O&&Object(f.jsx)("div",{className:"mt-1",children:Object(f.jsx)(l.ConstructorElement,{thumbnail:O.image_mobile,text:O.name,price:O.price,isLocked:!0,type:"bottom"})}),o>0&&Object(f.jsxs)("div",{className:[je.a.final_price,"mt-3 mb-1"].join(" "),children:[Object(f.jsx)("span",{className:"text text_type_digits-default mr-1",children:o}),Object(f.jsx)(l.CurrencyIcon,{type:"primary"}),Object(f.jsx)("div",{className:"ml-5",onClick:function(){c.find((function(e){return e.type===P.Bun}))?m?i(!0):p.push({pathname:"/login",state:{from:j}}):h.b.warn("\u0417\u0430\u043a\u0430\u0437 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d, \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430 \u0431\u0443\u043b\u043a\u0430 :(")},children:Object(f.jsx)(l.Button,{type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]}),Object(f.jsx)(ve,{show:n,onCloseClick:function(){i(!1)},children:Object(f.jsx)(De,{})}),d&&Object(f.jsx)("div",{className:"text text_type_digits-default ".concat(je.a.empty_dropzone," ").concat(je.a.drop_sign),children:x?Object(f.jsx)("p",{children:"\u0411\u0440\u043e\u0441\u0430\u0439"}):Object(f.jsx)("p",{children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0439 \u0434\u0430\u043b\u044c\u0448\u0435..."})})]})},ze=n(138),Ae=n.n(ze),Le=n(349),Ue=n(143),Ge=function(){return Object(f.jsx)("main",{className:[Ae.a.container,"mt-4"].join(" "),children:Object(f.jsxs)(Le.a,{backend:Ue.a,children:[Object(f.jsx)(pe,{}),Object(f.jsx)(Be,{})]})})},Me=function(){return Object(f.jsxs)("div",{style:{paddingTop:50,display:"flex",alignItems:"center",height:"100%",flexDirection:"column"},children:[Object(f.jsx)("h3",{className:"mt-4 mb-15 text text_type_main-large",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(f.jsx)(o.a,{style:{color:"white"},className:"text text_type_main-default",to:"/",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})},Ve=n(35),He=n.n(Ve),Je=n(12),Ze=n.n(Je),Qe={email:{type:"email",value:"",name:"email",placeholder:"E-mail",isError:!1},password:{type:"password",value:"",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",isError:!1,icon:"ShowIcon"},name:{type:"text",value:"",name:"name",placeholder:"\u0418\u043c\u044f",isError:!1},verification_code:{type:"text",value:"",name:"code",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",isError:!1},isDataTransfering:!1,isDataTransferingCompleted:!1,isErrorWhileDataTransfer:!1},Xe=Object(_.b)({name:"login",initialState:Qe,reducers:{changeEmailFieldValue:function(e,t){e.email.value=t.payload,e.email.isError=!1},changePaswordFieldValue:function(e,t){e.password.value=t.payload,e.password.isError=!1},changeNameFieldValue:function(e,t){e.name.value=t.payload,e.name.isError=!1},changeCodeFieldValue:function(e,t){e.verification_code.value=t.payload,e.verification_code.isError=!1},changeEmailFieldError:function(e,t){e.email.errorText=t.payload,e.email.isError=!0},changePaswordFieldError:function(e,t){e.password.errorText=t.payload,e.password.isError=!0},changeNameFieldError:function(e,t){e.name.errorText=t.payload,e.name.isError=!0},changeCodeFieldError:function(e,t){e.verification_code.errorText=t.payload,e.verification_code.isError=!0},changePaswordFieldIcon:function(e){"password"===e.password.type?(e.password.type="text",e.password.icon="HideIcon"):(e.password.type="password",e.password.icon="ShowIcon")},dataTransferCompletedSuccessfully:function(e){e.isDataTransfering=!1,e.isErrorWhileDataTransfer=!1,e.isDataTransferingCompleted=!0},switchOffDataTransferStatus:function(e){e.isDataTransferingCompleted=!1},isDataTransfering:function(e){e.isDataTransfering=!0,e.isErrorWhileDataTransfer=!1,e.isDataTransferingCompleted=!1},errorWhileDataTransfer:function(e){e.isDataTransfering=!1,e.isErrorWhileDataTransfer=!0,e.isDataTransferingCompleted=!0}}}),qe=Xe.actions,Ke=qe.changeEmailFieldValue,Ye=qe.changePaswordFieldValue,$e=qe.changePaswordFieldIcon,et=(qe.isDataTransfering,qe.errorWhileDataTransfer,qe.changeEmailFieldError),tt=qe.changePaswordFieldError,nt=qe.changeNameFieldValue,rt=qe.changeCodeFieldValue,it=qe.changeNameFieldError,at=qe.changeCodeFieldError,ct=qe.switchOffDataTransferStatus,st=Xe.reducer,ot=function(){return function(){var e=Object(g.a)(x.a.mark((function e(t,n){var r,i,a,c,s,o,l,d,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xe.actions,i=r.dataTransferCompletedSuccessfully,a=r.isDataTransfering,c=lt.actions,s=c.userFetched,o=c.userStartFetching,l=n().auth,d=l.user,u=l.isUserFetching,!d&&(d||y("accessToken"))){e.next=5;break}return e.abrupt("return",new Promise((function(e,t){e()})));case 5:if(!u){e.next=7;break}return e.abrupt("return");case 7:return t(o()),t(a()),e.abrupt("return",G().then((function(e){t(i()),t(Ke(e.user.email)),t(nt(e.user.name)),t(s(e))})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},lt=Object(_.b)({name:"auth",initialState:{user:null,isUserFetching:!1},reducers:{registerCompleted:function(e,t){e.user=t.payload.user,N("accessToken",F(t.payload.accessToken)),T("refreshToken",t.payload.refreshToken)},loginSuccessfullyCompleted:function(e,t){e.user=t.payload.user,N("accessToken",F(t.payload.accessToken)),T("refreshToken",t.payload.refreshToken)},userUpdateSuccessfullyCompleted:function(e,t){e.user=t.payload.user},loggedOut:function(e){e.user=null,E("accessToken"),C("refreshToken")},tokenRefreshed:function(e,t){N("accessToken",F(t.payload.accessToken)),T("refreshToken",t.payload.refreshToken)},userFetched:function(e,t){e.user=t.payload.user,e.isUserFetching=!1},userStartFetching:function(e){e.isUserFetching=!0},userCompletedFetchingWithError:function(e){e.isUserFetching=!1}}}),dt=lt.reducer,ut=function(){var e=Object(s.g)(),t=Object(s.h)(),n=ue(),r=de((function(e){return e.login})),i=r.email,a=r.password,c=r.isErrorWhileDataTransfer,d=r.isDataTransfering;return Object(f.jsxs)("div",{className:He.a.container,children:[Object(f.jsx)(l.Logo,{}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-20",children:"\u0412\u0445\u043e\u0434"}),Object(f.jsxs)("form",{onSubmit:function(r){if(r.preventDefault(),Ze.a.isEmail(i.value)||n(et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0430\u0434\u0440\u0435\u0441\u0435 \u043f\u043e\u0447\u0442\u044b")),Ze.a.isEmpty(i.value)&&n(et("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")),Ze.a.isEmpty(a.value)&&n(tt("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")),Ze.a.isEmail(i.value)&&!Ze.a.isEmpty(i.value)&&!Ze.a.isEmpty(a.value)){var c={email:i.value,password:a.value},s=t.state;n(function(e,t){return function(n){var r=Xe.actions,i=r.dataTransferCompletedSuccessfully,a=r.isDataTransfering,c=r.errorWhileDataTransfer,s=lt.actions.loginSuccessfullyCompleted;return n(a()),U(e).then((function(e){return e.json()})).then((function(e){if(!e.success)throw new Error(e.message?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");n(i()),n(s(e)),t()})).catch((function(e){n(c()),h.b.error(e.message)}))}}(c,(function(){e.replace(s&&s.from?s.from:{pathname:"/"})})))}},children:[Object(f.jsx)("div",{className:"mb-3",children:Object(f.jsx)(l.Input,{type:i.type,placeholder:i.placeholder,onChange:function(e){n(Ke(e.target.value))},value:i.value,name:i.name,error:i.isError,errorText:i.errorText,size:"default"})}),Object(f.jsx)("div",{className:"mb-3",children:Object(f.jsx)(l.Input,{type:a.type,placeholder:a.placeholder,onChange:function(e){n(Ye(e.target.value))},value:a.value,name:a.name,error:a.isError,errorText:a.errorText,size:"default",icon:a.icon,onIconClick:function(){n($e())}})}),Object(f.jsx)(l.Button,{type:"primary",size:"large",children:d?"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044e\u0442\u0441\u044f":"\u0412\u043e\u0439\u0442\u0438"})]}),c&&Object(f.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(f.jsx)(o.a,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(f.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(f.jsx)(o.a,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},mt=function(){var e=de((function(e){return e.login})),t=e.email,n=e.password,i=e.name,a=e.isErrorWhileDataTransfer,c=e.isDataTransfering,d=e.isDataTransferingCompleted,u=ue(),m=Object(s.g)();return Object(r.useEffect)((function(){d&&m.replace("/login")}),[d,m]),Object(r.useEffect)((function(){u(ct())}),[u]),Object(f.jsxs)("div",{className:He.a.container,children:[Object(f.jsx)(l.Logo,{}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-20",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(f.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),Ze.a.isEmail(t.value)||u(et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0430\u0434\u0440\u0435\u0441\u0435 \u043f\u043e\u0447\u0442\u044b")),Ze.a.isEmpty(t.value)&&u(et("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")),Ze.a.isEmpty(n.value)&&u(tt("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")),Ze.a.isEmpty(i.value)&&u(it("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")),Ze.a.isEmail(t.value)&&!Ze.a.isEmpty(t.value)&&!Ze.a.isEmpty(n.value)&&!Ze.a.isEmpty(i.value)){var r={email:t.value,password:n.value,name:i.value};u(function(e){return function(t){var n=Xe.actions,r=n.dataTransferCompletedSuccessfully,i=n.isDataTransfering,a=n.errorWhileDataTransfer,c=lt.actions.registerCompleted;return t(i()),L(e).then((function(e){return e.json()})).then((function(e){if(!e.success)throw new Error(e.message?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");t(r()),t(c(e)),h.b.success("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")})).catch((function(e){t(a()),h.b.error(e.message)}))}}(r))}},children:[Object(f.jsx)(l.Input,{type:i.type,placeholder:i.placeholder,onChange:function(e){u(nt(e.target.value))},value:i.value,name:i.name,error:i.isError,errorText:i.errorText,size:"default"}),Object(f.jsx)(l.Input,{type:t.type,placeholder:t.placeholder,onChange:function(e){u(Ke(e.target.value))},value:t.value,name:t.name,error:t.isError,errorText:t.errorText,size:"default"}),Object(f.jsx)(l.Input,{type:n.type,placeholder:n.placeholder,onChange:function(e){u(Ye(e.target.value))},value:n.value,name:n.name,error:n.isError,errorText:n.errorText,size:"default",icon:n.icon,onIconClick:function(){u($e())}}),Object(f.jsx)(l.Button,{type:"primary",size:"large",children:c?"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),a&&Object(f.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(f.jsx)(o.a,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},pt=function(){var e=de((function(e){return e.login})),t=e.email,n=e.isErrorWhileDataTransfer,i=e.isDataTransfering,a=e.isDataTransferingCompleted,c=ue(),d=Object(s.g)(),u=Object(s.h)();return Object(r.useEffect)((function(){a&&(c(ct()),d.replace({pathname:"/reset-password",state:{from:u}}))}),[a,d,u,c]),Object(f.jsxs)("div",{className:He.a.container,children:[Object(f.jsx)(l.Logo,{}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-20",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Ze.a.isEmail(t.value)||c(et("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0430\u0434\u0440\u0435\u0441\u0435 \u043f\u043e\u0447\u0442\u044b")),Ze.a.isEmpty(t.value)&&c(et("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")),Ze.a.isEmail(t.value)&&!Ze.a.isEmpty(t.value)&&c((function(e,t){var n=Xe.actions,r=n.dataTransferCompletedSuccessfully,i=n.isDataTransfering,a=n.errorWhileDataTransfer,c=t().login.email;return e(i()),J(c.value).then((function(e){return e.json()})).then((function(t){if(!t.success)throw new Error(t.error?t.error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");e(r()),h.b.success("\u041d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0412\u0430\u043c\u0438 email \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u0438\u0441\u044c\u043c\u043e \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0435\u0439")})).catch((function(t){e(a()),h.b.error(t.message)}))}))},children:[Object(f.jsx)(l.Input,{type:t.type,placeholder:t.placeholder,onChange:function(e){c(Ke(e.target.value))},value:t.value,name:t.name,error:t.isError,errorText:t.errorText,size:"default"}),Object(f.jsx)(l.Button,{type:"primary",size:"large",children:i?"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f":"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),n&&Object(f.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(f.jsx)(o.a,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},ft=function(){var e=Object(s.g)(),t=Object(s.h)();Object(r.useEffect)((function(){var n=(t.state?t.state:{from:null}).from;"/forgot-password"!==(null===n||void 0===n?void 0:n.pathname)&&e.replace({pathname:"/forgot-password"})}),[e,t.state]);var n=de((function(e){return e.login})),i=n.password,a=n.verification_code,c=n.isErrorWhileDataTransfer,d=n.isDataTransfering,u=n.isDataTransferingCompleted,m=ue();return Object(r.useEffect)((function(){u&&e.replace("/login")}),[u,e]),Object(f.jsxs)("div",{className:He.a.container,children:[Object(f.jsx)(l.Logo,{}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-20",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Ze.a.isEmpty(i.value)&&m(tt("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")),Ze.a.isEmpty(a.value)&&m(at("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")),Ze.a.isEmpty(i.value)||Ze.a.isEmpty(a.value)||m((function(e,t){var n=Xe.actions,r=n.dataTransferCompletedSuccessfully,i=n.isDataTransfering,a=n.errorWhileDataTransfer,c=t().login,s=c.password,o=c.verification_code;return e(i()),Z(s.value,o.value).then((function(e){return e.json()})).then((function(t){if(!t.success)throw new Error(t.message?t.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");e(r()),h.b.success("\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")})).catch((function(t){e(a()),h.b.error(t.message)}))}))},children:[Object(f.jsx)(l.Input,{type:i.type,placeholder:i.placeholder,onChange:function(e){m(Ye(e.target.value))},value:i.value,name:i.name,error:i.isError,errorText:i.errorText,size:"default",icon:i.icon,onIconClick:function(){m($e())}}),Object(f.jsx)(l.Input,{type:a.type,placeholder:a.placeholder,onChange:function(e){m(rt(e.target.value))},value:a.value,name:a.name,error:a.isError,errorText:a.errorText,size:"default"}),Object(f.jsx)(l.Button,{type:"primary",size:"large",children:d?"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),c&&Object(f.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(f.jsx)(o.a,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},jt=n(139),ht=n.n(jt),_t=n(39),bt=n.n(_t),xt=function(e){var t=e.order;return"done"===t.status?Object(f.jsx)("p",{className:"text text_type_main-medium text_success_color mt-1",style:{fontSize:14},children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}):"created"===t.status?Object(f.jsx)("p",{className:"text text_type_main-medium  mt-1",style:{fontSize:14},children:"\u0421\u043e\u0437\u0434\u0430\u043d"}):Object(f.jsx)("p",{className:"text text_type_main-medium text_danger_color mt-1",style:{fontSize:14},children:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"})},gt=function(e){var t=e.order,n=Object(s.j)(),i=Object(s.h)(),a=Object(s.g)(),c=Object(r.useMemo)((function(){return t.ingredients.map((function(e){return e?e.price:0})).reduce((function(e,t){return e+t}),0)}),[t.ingredients]);return Object(f.jsxs)("div",{className:bt.a.container,onClick:function(){return a.push({pathname:"".concat(n.url,"/").concat(t.number),state:{from:i}})},children:[Object(f.jsxs)("div",{className:bt.a.order_number_date,children:[Object(f.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]}),Object(f.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:[t.createdAt," i-GMT+3"]})]}),Object(f.jsx)("p",{className:"text text_type_main-medium",children:t.name}),Object(f.jsx)(xt,{order:t}),Object(f.jsxs)("div",{className:bt.a.ingredient_and_price_container,children:[Object(f.jsx)("div",{className:bt.a.ingredient_container,children:t.ingredients.map((function(e,n){return n<6?Object(f.jsxs)("div",{className:bt.a.ingredient_image,children:[Object(f.jsx)("img",{src:null===e||void 0===e?void 0:e.image_mobile,alt:null===e||void 0===e?void 0:e.name}),t.ingredients.length-6>0&&0===n?Object(f.jsxs)("p",{style:{position:"absolute",top:17,left:15},className:"text text_type_digits-default",children:["+",t.ingredients.length-6]}):null]},n):null}))}),Object(f.jsxs)("div",{className:bt.a.price,children:[Object(f.jsx)("span",{className:"text text_type_digits-default pr-3",children:c})," ",Object(f.jsx)(l.CurrencyIcon,{type:"primary"})]})]})]})},Ot=function(e){var t=e.orders;return Object(f.jsx)("div",{className:ht.a.container,children:t.map((function(e,t){return Object(f.jsx)(gt,{order:e},t)}))})},vt=n(140),yt=n.n(vt),Nt=function(){var e=Object(le.c)((function(e){return e.feed})),t=e.orders,n=e.isFetchingFeed,r=e.isErrorWhileFetchingFeed;return Object(f.jsxs)("div",{className:yt.a.container,children:[Object(f.jsx)("p",{className:"text text_type_main-large mb-10 mt-15",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),n?Object(f.jsx)("div",{children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445..."}):Object(f.jsx)(Ot,{orders:t}),r&&Object(f.jsx)("div",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})},Et=n(44),Tt=n.n(Et),wt=function(){var e=Object(le.c)((function(e){return e.feed})),t=e.total,n=e.totalToday,i=e.orders,a=Object(r.useMemo)((function(){return i.filter((function(e){return"done"===e.status}))}),[i]),c=Object(r.useMemo)((function(){return i.filter((function(e){return"done"!==e.status}))}),[i]);return Object(f.jsxs)("div",{className:Tt.a.container,children:[Object(f.jsxs)("div",{className:Tt.a.orders_numbers,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(f.jsx)("div",{className:[Tt.a.orders_numbers_column,Tt.a.orders_ready].join(" "),children:a.map((function(e){return Object(f.jsx)("p",{className:"text text_type_digits-default mb-3",children:e.number},e.number)}))})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(f.jsx)("div",{className:Tt.a.orders_numbers_column,children:c.map((function(e){return Object(f.jsx)("p",{className:"text text_type_digits-default mb-3",children:e.number},e.number)}))})]})]}),Object(f.jsx)("p",{className:"text text_type_main-medium mb-2 mt-10",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(f.jsx)("p",{className:"text text_type_digits-large glow_text",children:t}),Object(f.jsx)("p",{className:"text text_type_main-medium mb-2 mt-10",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(f.jsx)("p",{className:"text text_type_digits-large glow_text",children:n})]})},Ct=n(141),Ft=n.n(Ct),kt={orders:[],isFetchingFeed:!1,isErrorWhileFetchingFeed:!1,order:void 0,isFetchingOrder:!1,isErrorWhileFetchingOrder:!1,total:0,totalToday:0},Dt=Object(_.b)({name:"feed",initialState:kt,reducers:{feedFetched:function(e,t){e.isFetchingFeed=!1,e.isErrorWhileFetchingFeed=!1,e.orders=t.payload.orders,e.total=t.payload.total,e.totalToday=t.payload.totalToday},feedSocketInit:function(e){e.isFetchingFeed=!0,e.isErrorWhileFetchingFeed=!1},feedSocketClose:function(e){e.isFetchingFeed=!1,e.isErrorWhileFetchingFeed=!1,e.orders=[],e.total=0,e.totalToday=0},myFeedSocketInit:function(e){e.isFetchingFeed=!0,e.isErrorWhileFetchingFeed=!1},feedFetchError:function(e){e.isFetchingFeed=!1,e.isErrorWhileFetchingFeed=!0,e.orders=[],e.total=0,e.totalToday=0},orderFetched:function(e,t){e.isFetchingOrder=!1,e.isErrorWhileFetchingOrder=!1,e.order=t.payload},orderIsFetching:function(e){e.isFetchingOrder=!0,e.isErrorWhileFetchingOrder=!1},orderFetchError:function(e){e.isFetchingOrder=!1,e.isErrorWhileFetchingOrder=!0,e.order=void 0}}}),It=Dt.actions,St=It.feedSocketInit,Rt=It.myFeedSocketInit,Wt=It.feedFetched,Pt=It.feedSocketClose,Bt=Dt.reducer,zt=function(){var e=ue(),t=de((function(e){return e.ingredients})).ingredients;return Object(r.useEffect)((function(){return t.length&&e(St()),function(){e(Pt())}}),[e,t]),Object(f.jsxs)("div",{className:Ft.a.container,children:[Object(f.jsx)(Nt,{}),Object(f.jsx)(wt,{})]})},At=n(40),Lt=n.n(At),Ut=n(53),Gt=n.n(Ut),Mt=function(e){var t=e.ingredientWithAmount;return Object(f.jsxs)("div",{className:Gt.a.container,children:[Object(f.jsxs)("div",{className:Gt.a.image_name,children:[Object(f.jsx)("div",{className:Gt.a.ingredient_image,children:Object(f.jsx)("img",{src:t.ingredient.image_mobile,alt:t.ingredient.name})}),Object(f.jsx)("p",{className:"text text_type_main-default ml-5",children:t.ingredient.name})]}),Object(f.jsxs)("div",{className:Gt.a.amount_price,children:[Object(f.jsx)("p",{className:"text text_type_digits-default",children:t.amount}),Object(f.jsx)("p",{className:"text text_type_main-default ml-2 mr-2",children:"x"}),Object(f.jsx)("p",{className:"text text_type_digits-default mr-3",children:t.ingredient.price}),Object(f.jsx)(l.CurrencyIcon,{type:"primary"})]})]})},Vt=function(){var e=Object(s.i)().order_id,t=de((function(e){return e.feed})),n=t.order,i=t.isErrorWhileFetchingOrder,a=ue(),c=Object(s.h)(),o=Object(s.j)(),d=(c.state?c.state:{from:null}).from,u=Object(r.useMemo)((function(){var e=[];return n?(n.ingredients.forEach((function(t){var n=e.findIndex((function(e){return e.ingredient._id===(null===t||void 0===t?void 0:t._id)}));-1===n?t&&e.push({ingredient:t,amount:1}):t&&(e[n].amount+=1)})),e):[]}),[n]),m=de((function(e){return e.feed})).orders,p=de((function(e){return e.ingredients.ingredients}));Object(r.useEffect)((function(){p.length&&!m.length&&("/feed/:order_id"===o.path?a(St()):a(Rt()))}),[a,p,m,o]),Object(r.useEffect)((function(){var t;m.length&&a((t=e,function(e,n){var r=Dt.actions,i=r.orderFetched,a=r.orderFetchError,c=r.orderIsFetching,s=n().feed.orders;if(s.length){e(c());var o=s.find((function(e){return e.number===t}));o?e(i(o)):(e(a()),h.b.error("\u0417\u0430\u043a\u0430\u0437 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0441\u0440\u0435\u0434\u0438 \u0432\u0441\u0435\u0445 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"))}}))}),[a,e,m]);var j=Object(r.useMemo)((function(){return u.map((function(e){return e.ingredient.price*e.amount})).reduce((function(e,t){return e+t}),0)}),[u]),_=function(){return Object(r.useMemo)((function(){return Object(f.jsx)("div",{className:Lt.a.container,children:i?Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445"}):Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445..."})})}),[])};return n?Object(f.jsxs)("div",{className:Lt.a.container,children:["/profile/orders"!==(null===d||void 0===d?void 0:d.pathname)&&"/feed"!==(null===d||void 0===d?void 0:d.pathname)&&Object(f.jsxs)("p",{className:"text text_type_digits-medium mb-10",children:["#",null===n||void 0===n?void 0:n.number]}),Object(f.jsxs)("div",{className:Lt.a.inner,children:[Object(f.jsx)("p",{className:"text text_type_main-medium mb-10 mt-10",children:n.name}),Object(f.jsx)(xt,{order:n}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-10",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(f.jsx)("div",{className:Lt.a.ingredients_list,children:u.map((function(e,t){return e?Object(f.jsx)(Mt,{ingredientWithAmount:e},t):null}))}),Object(f.jsxs)("div",{className:Lt.a.date_price,children:[Object(f.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:[n.createdAt," i-GMT+3"]}),Object(f.jsxs)("div",{className:Lt.a.price,children:[Object(f.jsx)("p",{className:"text text_type_digits-default mr-3",children:j}),Object(f.jsx)(l.CurrencyIcon,{type:"primary"})]})]})]})]}):Object(f.jsx)(_,{})},Ht=n(64),Jt=n.n(Ht),Zt=function(e){var t=e.children,n=ue();return Object(f.jsxs)("div",{className:Jt.a.container,children:[Object(f.jsxs)("div",{className:Jt.a.links,children:[Object(f.jsx)("div",{className:"mb-10",children:Object(f.jsx)(o.b,{to:"/profile",exact:!0,className:"link text text_type_main-default text_color_inactive",activeClassName:"text_color_active",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(f.jsx)("div",{className:"mb-10",children:Object(f.jsx)(o.b,{to:"/profile/orders",className:"link text text_type_main-default text_color_inactive",activeClassName:"text_color_active",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(f.jsx)("div",{className:"mb-10",children:Object(f.jsx)("p",{onClick:function(){n((function(e){var t=Xe.actions,n=t.dataTransferCompletedSuccessfully,r=t.isDataTransfering,i=t.errorWhileDataTransfer,a=lt.actions.loggedOut;return e(r()),V().then((function(e){return e.json()})).then((function(t){if(!t.success)throw new Error(t.message?t.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");e(n()),e(a())})).catch((function(t){e(i()),h.b.error(t.message)}))}))},className:"link text text_type_main-default text_color_inactive cursor_pointer",children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(f.jsxs)("p",{className:"text text_type_main-small text_color_inactive opacity_04",children:["\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 ",Object(f.jsx)("br",{}),"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"]})]}),Object(f.jsx)("div",{className:Jt.a.profile_inner_container,children:t})]})},Qt=n(142),Xt=n.n(Qt),qt=function(){var e=de((function(e){return e.login})),t=e.email,n=e.password,i=e.name,a=e.isDataTransfering,c=e.isErrorWhileDataTransfer,s=de((function(e){return e.auth.user})),o=ue(),d=Object(r.useCallback)((function(){s&&(o(Ke(s.email)),s.name&&o(nt(s.name)))}),[o,s]);Object(r.useEffect)((function(){d()}),[d]);return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={name:i.value,email:t.value,password:n.value};o(function(e){return function(t){var n=Xe.actions,r=n.dataTransferCompletedSuccessfully,i=n.isDataTransfering,a=n.errorWhileDataTransfer,c=lt.actions.userUpdateSuccessfullyCompleted;return t(i()),Q(e).then((function(e){if(!e.success)throw new Error(e.message?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");t(r()),t(c(e)),h.b.success("\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b")})).catch((function(e){t(a()),h.b.error(e.message)}))}}(r))},children:[Object(f.jsx)("div",{className:"input_container_full_width mb-3",children:Object(f.jsx)(l.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){o(nt(e.target.value))},icon:"EditIcon",value:i.value,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(f.jsx)("div",{className:"input_container_full_width mb-3",children:Object(f.jsx)(l.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:function(e){o(Ke(e.target.value))},icon:"EditIcon",value:t.value,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(f.jsx)("div",{className:"input_container_full_width mb-3",children:Object(f.jsx)(l.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){o(Ye(e.target.value))},icon:"EditIcon",value:n.value,name:"password",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(f.jsxs)("div",{className:Xt.a.cancel_submit,children:[Object(f.jsx)("div",{className:"mr-5 cursor_pointer text_success_color",onClick:d,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(f.jsx)(l.Button,{type:"primary",size:"medium",children:a?"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),c&&Object(f.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"})]})},Kt=function(){var e=ue(),t=de((function(e){return e.feed})),n=t.orders,i=t.isFetchingFeed,a=t.isErrorWhileFetchingFeed,c=de((function(e){return e.ingredients})).ingredients,s=de((function(e){return e.auth})).user;return Object(r.useEffect)((function(){return c.length&&s&&e(Rt()),function(){e(Pt())}}),[e,c,s]),Object(f.jsxs)(f.Fragment,{children:[i?Object(f.jsx)("div",{children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445..."}):Object(f.jsx)(Ot,{orders:n}),a&&Object(f.jsx)("div",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})},Yt=n(43),$t=["children"],en=function(e){var t=e.children,n=Object(Yt.a)(e,$t),i=de((function(e){return e.auth})),a=i.user,c=i.isUserFetching,o=ue(),l=Object(r.useState)(!1),d=Object(Y.a)(l,2),u=d[0],m=d[1],p=Object(s.g)();return Object(r.useEffect)((function(){(function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(ot());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){return m(!0)}))}),[o,p]),!u||c?null:Object(f.jsx)(s.b,Object($.a)(Object($.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(f.jsx)(s.a,{to:{pathname:"/login",state:{from:n}}})}}))},tn=["children"],nn=function(e){var t=e.children,n=Object(Yt.a)(e,tn),i=de((function(e){return e.auth})),a=i.user,c=i.isUserFetching,o=ue(),l=Object(s.g)(),d=Object(r.useState)(!1),u=Object(Y.a)(d,2),m=u[0],p=u[1];return Object(r.useEffect)((function(){(function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(ot());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){return p(!0)}))}),[o,l]),!m||c?null:Object(f.jsx)(s.b,Object($.a)(Object($.a)({},n),{},{render:function(e){e.location;return a?Object(f.jsx)(s.a,{to:{pathname:"/"}}):t}}))},rn=n(65),an=n.n(rn),cn="SET_INGREDIENT_AS_PREVIEW",sn="CLEAR_INGREDIENT_PREVIEW",on={ingredient:null},ln=function(){var e=Object(s.h)(),t=(e.state?e.state:{from:null}).from,n=ue(),i=Object(s.i)().id,a=de((function(e){return e.detailedIngredient.ingredient})),c=de((function(e){return e.ingredients.ingredients}));return Object(r.useEffect)((function(){n(function(e){return function(t,n){var r=n().ingredients.ingredients;return t({type:sn}),new Promise((function(t,n){var i=r.find((function(t){return t._id===e}));i?t(i):n("\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u0441 \u0442\u0430\u043a\u0438\u043c ID \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")})).then((function(e){t({type:cn,ingredient:e})})).catch((function(e){h.b.error(e.message)}))}}(i))}),[n,i,c]),c.length?a?Object(f.jsx)("div",{className:an.a.Container,children:Object(f.jsxs)("div",{className:an.a.inner,children:["/"!==(null===t||void 0===t?void 0:t.pathname)&&Object(f.jsx)("h2",{className:"mt-20",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(f.jsx)("img",{src:a.image_large,alt:a.name}),Object(f.jsx)("div",{className:"text text_type_main-default",children:a.name}),Object(f.jsx)("div",{className:"text default mt-3",style:{textAlign:"center",fontSize:14},children:a.description||"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),Object(f.jsxs)("div",{className:[an.a.NumbersContainer,"text text_type_main-default mt-3"].join(" "),children:[Object(f.jsxs)("div",{children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",Object(f.jsx)("p",{className:"text text_type_digits-default",children:a.calories})]}),Object(f.jsxs)("div",{children:["\u0411\u0435\u043b\u043a\u0438,\u0433",Object(f.jsx)("p",{className:"text text_type_digits-default",children:a.proteins})]}),Object(f.jsxs)("div",{children:["\u0416\u0438\u0440\u044b,\u0433",Object(f.jsx)("p",{className:"text text_type_digits-default",children:a.fat})]}),Object(f.jsxs)("div",{children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b,\u0433",Object(f.jsx)("p",{className:"text text_type_digits-default",children:a.carbohydrates})]})]})]})}):Object(f.jsx)("h3",{children:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d..."}):Object(f.jsx)("h3",{children:"Loading..."})},dn=function(){var e=Object(s.g)();return e.location&&e.location.state&&e.replace(Object($.a)(Object($.a)({},e.location),{},{state:null})),null},un=n(19),mn=Object(un.a)();var pn=function(){var e=ue();return Object(r.useEffect)((function(){e((function(e){var t=q.actions,n=t.ingredientsFetched,r=t.ingredientsFetchError,i=t.ingredientsAreFetching;return e(i()),X().then((function(e){return e.json()})).then((function(t){if(!t.success)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");e(n(t.data))})).catch((function(t){e(r()),h.b.error(t.message)}))})),e(ot())}),[e]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)(s.c,{history:mn,children:[Object(f.jsx)(dn,{}),Object(f.jsx)(j,{}),Object(f.jsxs)(s.d,{children:[Object(f.jsx)(s.b,{path:"/",exact:!0,children:Object(f.jsx)(Ge,{})}),Object(f.jsx)(s.b,{path:"/ingredients/:id",exact:!0,render:function(e){var t=e.location,n=e.history,r=(e.match,(t.state?t.state:{from:null}).from);return"/"===(null===r||void 0===r?void 0:r.pathname)?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Ge,{}),Object(f.jsx)(ve,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",show:!0,onCloseClick:function(){return n.goBack()},children:Object(f.jsx)(ln,{})})]}):Object(f.jsx)(ln,{})}}),Object(f.jsx)(nn,{path:"/login",exact:!0,children:Object(f.jsx)(ut,{})}),Object(f.jsx)(nn,{path:"/register",exact:!0,children:Object(f.jsx)(mt,{})}),Object(f.jsx)(nn,{path:"/forgot-password",exact:!0,children:Object(f.jsx)(pt,{})}),Object(f.jsx)(nn,{path:"/reset-password",exact:!0,children:Object(f.jsx)(ft,{})}),Object(f.jsx)(s.b,{path:"/feed",exact:!0,children:Object(f.jsx)(zt,{})}),Object(f.jsx)(s.b,{path:"/feed/:order_id",exact:!0,render:function(e){var t=e.location,n=e.history,r=e.match,i=(t.state?t.state:{from:null}).from;return"/feed"===(null===i||void 0===i?void 0:i.pathname)?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(zt,{}),Object(f.jsx)(ve,{title:"#".concat(r.params.order_id),show:!0,onCloseClick:function(){return n.goBack()},children:Object(f.jsx)(Vt,{})})]}):Object(f.jsx)(Vt,{})}}),Object(f.jsx)(en,{path:"/profile",children:Object(f.jsx)(Zt,{children:Object(f.jsxs)(s.d,{children:[Object(f.jsx)(s.b,{path:"/profile",exact:!0,children:Object(f.jsx)(qt,{})}),Object(f.jsx)(s.b,{path:"/profile/orders",exact:!0,children:Object(f.jsx)(Kt,{})}),Object(f.jsx)(s.b,{path:"/profile/orders/:order_id",exact:!0,render:function(e){var t=e.location,n=e.history,r=e.match,i=(t.state?t.state:{from:null}).from;return"/profile/orders"===(null===i||void 0===i?void 0:i.pathname)?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Kt,{}),Object(f.jsx)(ve,{title:"#".concat(r.params.order_id),show:!0,onCloseClick:function(){return n.goBack()},children:Object(f.jsx)(Vt,{})})]}):Object(f.jsx)(Vt,{})}})]})})}),Object(f.jsx)(s.b,{children:Object(f.jsx)(Me,{})})]})]}),Object(f.jsx)(h.a,{})]})},fn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,352)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))},jn=(n(342),n(343),n(38)),hn=n(17),_n={ingredients:[],finalPrice:0},bn=function(e){return e.reduce((function(e,t){return e+t.price}),0)},xn={order:{name:"",number:"",status:"pending",ingredients:[],createdAt:"",updatedAt:""},isFetching:!1,isErrorWhileFetching:!1},gn={ingredient:null},On=Object(hn.b)({ingredients:K,burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:var n=[];if(t.ingredient.type===P.Bun){var r=e.ingredients.filter((function(e){return e.type!==P.Bun}));n=[t.ingredient].concat(Object(jn.a)(r),[t.ingredient])}else{var i=e.ingredients.find((function(e){return e.type===P.Bun})),a=e.ingredients.filter((function(e){return e.type!==P.Bun}));n=i?[i].concat(Object(jn.a)(a),[t.ingredient,i]):[].concat(Object(jn.a)(a),[t.ingredient])}return Object($.a)(Object($.a)({},e),{},{ingredients:n,finalPrice:bn(n)});case ie:var c=e.ingredients.filter((function(e){return e!==t.ingredient}));return Object($.a)(Object($.a)({},e),{},{ingredients:c,finalPrice:bn(c)});case ce:return Object($.a)(Object($.a)({},e),{},{ingredients:[],finalPrice:bn([])});case ae:var s=Object(jn.a)(e.ingredients),o=s.splice(t.indexesOfTransferedElement.from,1);return s.splice(t.indexesOfTransferedElement.to,0,o[0]),Object($.a)(Object($.a)({},e),{},{ingredients:s});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object($.a)(Object($.a)({},e),{},{isFetching:!0,isErrorWhileFetching:!1});case we:return Object($.a)(Object($.a)({},e),{},{order:t.order,isFetching:!1,isErrorWhileFetching:!1});case Ce:return h.b.error(t.message),Object($.a)(Object($.a)({},e),{},{isFetching:!1,isErrorWhileFetching:!0});default:return e}},detailedIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cn:return Object($.a)(Object($.a)({},e),{},{ingredient:t.ingredient});case sn:return Object($.a)(Object($.a)({},e),{},{ingredient:null});default:return e}},draggingIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object($.a)(Object($.a)({},e),{},{ingredient:t.ingredient});case oe:return Object($.a)(Object($.a)({},e),{},{ingredient:null});default:return e}},login:st,feed:Bt,auth:dt}),vn=["success"],yn=Object(_.a)({reducer:On,middleware:[function(e){var t,n=null;return function(r){return function(i){var a=e.dispatch,c=e.getState,s=i.type,o=c().ingredients.ingredients;if(s===St.type&&o.length&&(n=new WebSocket("wss://norma.nomoreparties.space/orders/all")),s===Rt.type&&o.length){var l=y("accessToken");n=new WebSocket("".concat("wss://norma.nomoreparties.space/orders","?token=").concat(l))}n&&(n.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(Yt.a)(n,vn)),i=r.orders,c=i.length?i.sort((function(e,t){return Date.parse(t.updatedAt)-Date.parse(e.updatedAt)})).map((function(e){var t=e.ingredients.map((function(e){return o.find((function(t){return t._id===e}))})).filter((function(e){return void 0!==e}));return Object($.a)(Object($.a)({},e),{},{number:e.number.toString(),ingredients:t,createdAt:k(e.createdAt)})})):[];a(Wt(Object($.a)(Object($.a)({},r),{},{orders:c})))},n.onopen=function(){t=setInterval((function(){var e,t;1===(null===(e=n)||void 0===e?void 0:e.readyState)&&(null===(t=n)||void 0===t||t.send("ping"))}),1e3)},n.onclose=function(){clearInterval(t)},s===Pt.type&&n&&n.close()),r(i)}}}].concat(Object(jn.a)(Object(_.c)())),devTools:!1});c.a.render(Object(f.jsx)(le.a,{store:yn,children:Object(f.jsx)(pn,{})}),document.getElementById("root")),fn()},35:function(e,t,n){e.exports={container:"login_container__2wyBj"}},36:function(e,t,n){e.exports={ingredients_list_container:"ingredient_ingredients_list_container__16mfq",ingredient_container:"ingredient_ingredient_container__h5t4m",price:"ingredient_price__2xF1Q",ingredients_panel:"ingredient_ingredients_panel__1Z1he",ingredients_panel_title:"ingredient_ingredients_panel_title__3tZNB",DetailPopup:"ingredient_DetailPopup__EKZmN"}},39:function(e,t,n){e.exports={container:"order-in-list_container__2U-Uf",order_number_date:"order-in-list_order_number_date__BhAol",ingredient_image:"order-in-list_ingredient_image__1ph6_",ingredient_container:"order-in-list_ingredient_container__3a530",ingredient_and_price_container:"order-in-list_ingredient_and_price_container__oltXG",price:"order-in-list_price__P8tmz"}},40:function(e,t,n){e.exports={container:"order-detailed-page_container__wApjb",inner:"order-detailed-page_inner__3XTbB",ingredients_list:"order-detailed-page_ingredients_list__1pVUi",date_price:"order-detailed-page_date_price__3PHIx",price:"order-detailed-page_price__2OxKr"}},44:function(e,t,n){e.exports={container:"feed-summary_container__hagXz",orders_numbers:"feed-summary_orders_numbers__1id4O",orders_ready:"feed-summary_orders_ready__LsebF",orders_numbers_column:"feed-summary_orders_numbers_column__2GLz5"}},53:function(e,t,n){e.exports={container:"ingredient-with-amount-for-feed_container__3PjQy",ingredient_image:"ingredient-with-amount-for-feed_ingredient_image__211TX",image_name:"ingredient-with-amount-for-feed_image_name__3xuaT",amount_price:"ingredient-with-amount-for-feed_amount_price__35ZpV"}},64:function(e,t,n){e.exports={container:"profile_container__2OHmv",links:"profile_links__ug_nu",profile_inner_container:"profile_profile_inner_container__3aT7B"}},65:function(e,t,n){e.exports={Container:"modal-detailed_Container__UezDa",inner:"modal-detailed_inner__2R-Hz",NumbersContainer:"modal-detailed_NumbersContainer__35-ko"}},90:function(e,t,n){e.exports={ModalWindow:"modal_ModalWindow__3zPFJ",slidein:"modal_slidein__H5vGz",TitleAndClose:"modal_TitleAndClose__hqxBW"}}},[[344,1,2]]]);
//# sourceMappingURL=main.1a3efab0.chunk.js.map